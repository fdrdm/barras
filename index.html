  <!DOCTYPE html>
<html lang="es">
<head>
  <link rel="icon" type="image/png" href="/favicon.png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Build Your Plan</title>
  <style>
    body {
      background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
      color: #f1f5f9;
      font-family: 'Inter', system-ui, sans-serif;
      padding: 50px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 40px;
    }

    h1 {
      font-size: 26px;
      text-align: center;
      color: #e2e8f0;
      margin-bottom: -10px;
    }

    .subtitulo {
      font-size: 15px;
      color: #94a3b8;
      margin-top: -10px;
      margin-bottom: 20px;
    }

    .zona-superior {
      display: flex;
      align-items: center;
      gap: 80px;
    }

    .cubos {
      display: flex;
      gap: 12px;
      justify-content: center;
    }

    .cubo {
      height: 60px;
      border-radius: 8px;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 600;
      font-size: 14px;
      user-select: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .cubo:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.4);
    }

    .idea { width: 30px; background: #3b82f6; }
    .outline { width: 60px; background: #22c55e; }
    .script { width: 240px; background: #f97316; } /* ‚Üê ancho corregido (8 ideas) */

    .cubo:active { opacity: 0.7; cursor: grabbing; }

    .barras {
      display: flex;
      flex-direction: column;
      gap: 45px;
      align-items: center;
      width: 100%;
      max-width: 1000px;
    }

    .contenedor-barra {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }

    .titulo-barra {
      font-size: 14px;
      color: #cbd5e1;
      font-weight: 500;
      white-space: nowrap;
    }

    .barra {
      background: #1e293b;
      border-radius: 14px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center; /* centrado de cubos */
      gap: 4px;
      padding: 6px;
      flex-wrap: wrap; /* permite que los cubos se acomoden */
      box-shadow: inset 0 0 8px rgba(0,0,0,0.3);
      transition: box-shadow 0.2s ease, outline 0.2s ease;
      overflow: hidden;
    }

    .barra:hover {
      box-shadow: inset 0 0 10px rgba(56,189,248,0.4);
    }

    .barra.over { outline: 3px dashed #38bdf8; }
    #trash.over { outline: 3px dashed #ef4444; }

    #trash {
      width: 90px;
      height: 90px;
      background: #1e293b;
      border-radius: 14px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      cursor: pointer;
      transition: background 0.25s, transform 0.15s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    #trash span {
      font-size: 12px;
      color: #94a3b8;
      margin-top: 4px;
    }

    #trash:hover { 
      background: #334155; 
      transform: translateY(-3px);
    }

    /* Ajuste de anchos exactos (sin espacio sobrante) */
    #clawquest { width: calc((30px * 18) + (4px * 7) + 12px); }  /* 18 cubos + gaps + padding */
    #basic { width: calc((30px * 8) + (4px * 7) + 12px); }   /* 8 cubos + gaps + padding */
    #plus  { width: calc((30px * 16) + (4px * 15) + 12px); }  /* 16 cubos + gaps + padding */
    #pro   { width: calc((30px * 24) + (4px * 23) + 12px); }  /* 24 cubos + gaps + padding */
  </style>
</head>
<body>
  <h1>Build Your Plan</h1>
  <div class="zona-superior">
    <div>
      <div class="cubos" id="zonaCubos">
        <div class="cubo idea plantilla" draggable="true" data-size="1" data-type="idea">Idea</div>
        <div class="cubo outline plantilla" draggable="true" data-size="2" data-type="outline">Outline</div>
        <div class="cubo script plantilla" draggable="true" data-size="8" data-type="script">Script</div> <!-- ‚Üê tama√±o corregido -->
      </div>
    </div>
    <div id="trash">üóëÔ∏è<span>Eliminar</span></div>
  </div>

  <!-- Bot√≥n para limpiar todas las barras -->
  <button id="limpiar" style="margin-bottom: 20px; padding: 8px 16px; border-radius: 8px; border: none; cursor: pointer; background:#ef4444; color:white; font-weight:600;">Limpiar todas las barras</button>

    <div class="barras">
      <div class="contenedor-barra">
      <span class="titulo-barra">CLAWQUEST ‚Äî 9 Ideas / 4 Outlines / 1 Script / MIX</span>
      <div class="barra" id="clawquest" data-capacidad="9"></div>
    </div>

    <div class="contenedor-barra">
      <span class="titulo-barra">Basic ‚Äî 8 Ideas / 4 Outlines / 1 Script / MIX</span> <!-- texto actualizado -->
      <div class="barra" id="basic" data-capacidad="8"></div>
    </div>

    <div class="contenedor-barra">
      <span class="titulo-barra">Plus ‚Äî 16 Ideas / 8 Outlines / 2 Scripts / MIX</span>
      <div class="barra" id="plus" data-capacidad="16"></div>
    </div>

    <div class="contenedor-barra">
      <span class="titulo-barra">Pro ‚Äî 24 Ideas / 12 Outlines / 3 Scripts / MIX</span>
      <div class="barra" id="pro" data-capacidad="24"></div>
    </div>
  </div>

  <script>
    const barras = document.querySelectorAll('.barra');
    const trash = document.getElementById('trash');

    document.addEventListener('dragstart', e => {
      if (e.target.classList.contains('cubo')) {
        e.dataTransfer.setData('type', e.target.dataset.type);
        e.dataTransfer.setData('size', e.target.dataset.size);
        e.dataTransfer.setData('isTemplate', e.target.classList.contains('plantilla'));
        e.target.classList.add('dragging');
      }
    });

    document.addEventListener('dragend', e => {
      if (e.target.classList.contains('cubo')) e.target.classList.remove('dragging');
    });

    function setupDropZone(zone, isBarra = false) {
      zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('over'); });
      zone.addEventListener('dragleave', () => zone.classList.remove('over'));

      zone.addEventListener('drop', e => {
        e.preventDefault();
        zone.classList.remove('over');
        const type = e.dataTransfer.getData('type');
        const size = parseInt(e.dataTransfer.getData('size'));
        const isTemplate = e.dataTransfer.getData('isTemplate') === 'true';
        const dragging = document.querySelector('.dragging');

        if (isBarra) {
          const capacidad = parseInt(zone.dataset.capacidad);
          const ocupado = Array.from(zone.children)
            .filter(c => c.classList.contains('cubo'))
            .reduce((sum, c) => sum + parseInt(c.dataset.size), 0);

          if (ocupado + size <= capacidad) {
            let nuevo;
            if (isTemplate) {
              nuevo = document.createElement('div');
              nuevo.className = `cubo ${type}`;
              nuevo.textContent = type.charAt(0).toUpperCase() + type.slice(1);
              nuevo.dataset.type = type;
              nuevo.dataset.size = size;
              nuevo.draggable = true;
            } else {
              nuevo = dragging;
            }
            zone.appendChild(nuevo);
          } else {
            alert('‚ùå No hay espacio suficiente en esta barra');
          }
        } else if (zone.id === 'trash') {
          if (dragging && dragging.parentElement.classList.contains('barra')) {
            dragging.remove();
          }
        }
      });
    }

    barras.forEach(barra => setupDropZone(barra, true));
    setupDropZone(trash, false);

    // Limpiar todas las barras
    const botonLimpiar = document.getElementById('limpiar');
    botonLimpiar.addEventListener('click', () => {
      barras.forEach(barra => {
        barra.innerHTML = '';
      });
    });
  </script>
</body>
</html>



